- name: Configure Maven for Nexus
  run: |
    mkdir -p ~/.m2
    cat <<EOF > ~/.m2/settings.xml
    <settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                                  https://maven.apache.org/xsd/settings-1.0.0.xsd">

        <servers>
            <server>
                <id>nexus-snapshots</id>
                <username>${{ secrets.NEXUS_USER }}</username>
                <password>${{ secrets.NEXUS_PASSWORD }}</password>
            </server>

            <server>
                <id>nexus-releases</id>
                <username>${{ secrets.NEXUS_USER }}</username>
                <password>${{ secrets.NEXUS_PASSWORD }}</password>
            </server>
        </servers>

    </settings>
    EOF
